(this["webpackJsonpkawaii-zoo-react"]=this["webpackJsonpkawaii-zoo-react"]||[]).push([[0],{102:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-6-ukraine-nft",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"kawaii-zoo-game.cryptosketches.testnet",a=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-6-ukraine-nft",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NFT_CONTRACT_NAME||"kawaii-zoo-nft.cryptosketches.testnet",c=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-6-ukraine-nft",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DONATION_ACCOUNT_NAME||"kawaii-zoo-donation.cryptosketches.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,nftContractName:a,donationAccountName:c,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,nftContractName:a,donationAccountName:c,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,nftContractName:a,donationAccountName:c,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-6-ukraine-nft",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n,nftContractName:a,donationAccountName:c};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,nftContractName:a,donationAccountName:c,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,nftContractName:a,donationAccountName:c,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},179:function(e,t){},189:function(e,t){},235:function(e,t,n){},236:function(e){e.exports=JSON.parse('{"name":"kawaii-zoo-react","version":"1.0.11","homepage":"https://near-hackathon-luciferius.github.io/challenge-6-ukraine-nft","private":true,"dependencies":{"@emotion/react":"^11.9.0","@emotion/styled":"^11.8.1","@mui/icons-material":"^5.6.2","@mui/material":"^5.6.2","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","js-sha256":"^0.9.0","materialize-css":"^1.0.0-rc.2","near-api-js":"^0.42.0","react":"^17.0.0","react-burger-menu":"^3.0.6","react-dom":"^17.0.0","react-materialize":"^3.10.0","react-native-sha":"^0.1.6","react-router-dom":"^6.3.0","react-scripts":"4.0.3","save":"^2.4.0","save-dev":"^0.0.1-security","styled-components":"^5.2.0","web-vitals":"^1.0.1"},"scripts":{"start":"parcel src/index.html","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build -u \'Pages Bot <pages.bot@nonexisting.io>\'"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.2.3","parcel-bundler":"^1.12.5"}}')},239:function(e,t,n){"use strict";n.r(t);var a=n(51),c=n(19),r=n(6),s=n.n(r),o=n(0),i=n.n(o),l=n(50),d=n.n(l),u=n(18),h=n(7),j=n(15),m=n(1);function p(e){var t=e.signIn;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Kawaii Zoo Homepage"})}),Object(m.jsx)(j.Button,{small:!0,onClick:t,children:"Log in"}),Object(m.jsx)("p",{children:"This app was developed for the NEAR Spring hackathon. In order to use the app you need to sign in with your NEAR wallet."})]})}var b=n(27),O=n.n(b),f=n(5),x=n(93),g=n(94),v=n.n(g),N=n(96),w=n.n(N),y=function(e){return Object(m.jsx)("div",{className:"popup-box",children:Object(m.jsxs)("div",{className:"box",children:[Object(m.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})},_=function(e){var t=e.currentUser,n=e.signIn,a=e.signOut,c=e.clearMessage,r=e.message;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{class:"image"}),Object(m.jsxs)("div",{id:"App",children:[Object(m.jsxs)(x.slide,{pageWrapId:"page-wrapper",outerContainerId:"App",children:[Object(m.jsx)(u.b,{className:"menu-item",to:"/",children:"Dashboard"}),Object(m.jsx)(u.b,{className:"menu-item",to:"/collection",children:"Collection"}),Object(m.jsx)(u.b,{className:"menu-item",to:"/payout",children:"Payout"})]}),Object(m.jsx)("main",{id:"page-wrapper",children:Object(m.jsx)(f.a,{})}),t?Object(m.jsx)(j.Button,{onClick:a,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(v.a,{fontSize:"medium"}),tooltip:"Log out "+t.accountId+"."}):Object(m.jsx)(j.Button,{onClick:n,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(w.a,{fontSize:"medium"}),tooltip:"Log in using NEAR wallet."}),r&&Object(m.jsx)(y,{content:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("b",{children:"A message for you"}),Object(m.jsx)("p",{children:r})]}),handleClose:c})]})]})},S=n(97),C=n(98),T=n(104),E=n(103),k=n.p+"static/media/404.6fa35088.jpg",A=function(e){Object(T.a)(n,e);var t=Object(E.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return Object(m.jsx)("img",{src:k,alt:"Nothing is here.",width:"900",style:{margin:"10em"}})}}]),n}(i.a.Component),I=A,U=n(23),F=n(100),R=n.n(F),D=n(99),P=n.n(D),M=n(101),H=n.n(M),K=function(e){var t=e.version,n=e.nearConfig,r=Object(o.useState)(!1),i=Object(h.a)(r,2),l=i[0],d=i[1],j=Object(o.useState)(""),p=Object(h.a)(j,2),b=p[0],f=p[1],x=Object(o.useState)(""),g=Object(h.a)(x,2),v=g[0],N=g[1],w=Object(o.useState)(""),y=Object(h.a)(w,2),_=y[0],S=y[1];return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n.contractName);case 2:return a=e.sent,e.next=5,t(n.donationAccountName);case 5:c=e.sent,S(O()(c).div(Math.pow(10,24)).minus(100).toFixed(2)),f(O()(a).div(Math.pow(10,24)).minus(100).toFixed(2)),N(O()(a).div(Math.pow(10,24)).minus(100).div(2).toFixed(2)),d(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(e){return r.apply(this,arguments)}function r(){return(r=Object(c.a)(s.a.mark((function e(t){var c,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new U.keyStores.BrowserLocalStorageKeyStore,e.next=3,U.connect(Object(a.a)({keyStore:c},n));case 3:return r=e.sent,e.next=6,r.account(t);case 6:return o=e.sent,e.next=9,o.getAccountBalance();case 9:return i=e.sent,e.abrupt("return",i.total);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:["NEAR Challenge #6 - Kawaii Zoo NFTs - ",t]})}),l?Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(P.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Game Treasury"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsxs)("h5",{children:[b," \u24c3"]})})]})})})}),Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(R.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Next Payout"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsxs)("h5",{children:[v," \u24c3"]})})]})})})}),Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(H.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Donated Amount"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsxs)("h5",{children:[_," \u24c3"]})})]})})})})]}):null,Object(m.jsx)("p",{children:"This app was developed for the NEAR Spring hackathon. It demonstrate how donations for Ukrainian Zoos can be collected using a simple NFT-based set collection game."}),Object(m.jsx)("p",{children:"Here is how the app works. Everyone can mint animal NFTs. These animals come in 5 colors and 5 different animals. Each animal costs exactly 1 NEAR. 0.2 NEAR are directly donated to a donation account. The remaining 0.8 NEAR go to the apps treasury."}),Object(m.jsx)("p",{children:"This app is a set collection game. You need to either collect 5 differnt animals in the same color or one animal in 5 differnt colors. Once you have a completed set you can cash out from the games treasury. In this demonstration you simply get 50% of the treasury. When a set is cashed out, the NFTs are invalided. They are still owned by the user, but unusable for a cash out."}),Object(m.jsx)("p",{children:"They idea behind that was, that in order get donations you need to create incentives. The incentive here is basically a game of luck. In average a user needs to mint more than 5 animals to get a complete set. But a lucky user will get a complete set with minting only 5 animals. This user might then cash out more then he put into the game."}),Object(m.jsx)("p",{children:"Of course in a real world scenario the dynamic of the rewards need to be adjusted to make the game fair and fun. Additonally there are possiblities for more income streams to the tresury/donation account in form of external NFT market place fees/royalty or additional NFTs like color changing food."}),Object(m.jsxs)("h5",{children:["Head over to ",Object(m.jsx)(u.b,{className:"menu-item",to:"/collection",children:"your collection"})," to mint you first animal or go to ",Object(m.jsx)(u.b,{className:"menu-item",to:"/payout",children:"payout"})," to see your complete sets and cash them out."]})]})};function L(e){var t=e.onNftMint;return Object(m.jsx)("form",{onSubmit:t,children:Object(m.jsxs)("fieldset",{id:"fieldset",children:[Object(m.jsxs)("div",{className:"highlight",children:[Object(m.jsx)("p",{children:"Select the amount of animals you want to mint. Each animal costs 1 \u24c3."}),Object(m.jsx)(j.Range,{id:"amount",min:"1",max:"7"})]}),Object(m.jsx)(j.Button,{type:"submit",small:!0,tooltip:"Mint the chosen amount of animals.",children:"Mint!"})]})})}var W=function(e){var t=e.currentUser,n=e.onNftMint,a=e.contract,r=Object(o.useState)([]),i=Object(h.a)(r,2),l=i[0],d=i[1],u=Object(o.useState)(!1),p=Object(h.a)(u,2),b=p[0],O=p[1];Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.nft_supply_for_owner({account_id:t.accountId});case 2:return n=e.sent,e.next=5,a.nft_tokens_for_owner({account_id:t.accountId,from_index:"0",limit:parseInt(n)});case 5:c=e.sent,console.log(c),d(f(c.filter((function(e){return"used"!==e.metadata.extra})),3)),O(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,t]);var f=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n};return b?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[t.accountId,"'s Collection"]})}),l.length>0?l.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s4",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-image",children:Object(m.jsx)("img",{src:e.metadata.media,alt:e.metadata.title,height:"200",className:"nft-image"})}),Object(m.jsx)("div",{className:"card-title",children:e.metadata.title}),Object(m.jsx)("div",{className:"card-content",children:Object(m.jsx)("p",{children:e.metadata.description})})]})})}))})})):Object(m.jsx)("p",{children:"You do not have any NFTs in your collection. All used NFTs are filtered out in this view."}),Object(m.jsx)("h5",{children:"Mint a new NFT below."}),Object(m.jsx)(L,{onNftMint:n})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Available sets."})}),Object(m.jsx)("h1",{children:"Loading..."}),Object(m.jsx)(j.Spinner,{})]})},B=function(e){var t=e.currentUser,n=e.contract,a=e.onPayout,r=Object(o.useState)([]),i=Object(h.a)(r,2),l=i[0],d=i[1],p=Object(o.useState)(!1),b=Object(h.a)(p,2),O=b[0],f=b[1];return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.nft_supply_for_owner({account_id:t.accountId});case 2:return c=e.sent,e.next=5,n.nft_tokens_for_owner({account_id:t.accountId,from_index:"0",limit:parseInt(c)});case 5:r=e.sent,console.log(r),a(r),f(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){var t=[];r(e,["11","12","13","14","15"],t),r(e,["21","22","23","24","25"],t),r(e,["31","32","33","34","35"],t),r(e,["41","42","43","44","45"],t),r(e,["51","52","53","54","55"],t),r(e,["11","21","31","41","51"],t),r(e,["12","22","32","42","52"],t),r(e,["13","23","33","43","53"],t),r(e,["14","24","34","44","54"],t),r(e,["15","25","35","45","55"],t),d(t)}function r(e,t,n){var a=[];t.forEach((function(t){var n=e.find((function(e){return e.metadata.extra===t}));n&&a.push(n)})),a.length===t.length&&n.push(a)}!function(){e.apply(this,arguments)}()}),[n,t]),O?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Cash Out Completed Sets"})}),l.length>0?l.map((function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"row  valign-wrapper center",children:[Object(m.jsx)("div",{className:"col s1",children:Object(m.jsx)(j.Button,{small:!0,tooltip:"Payout the set. This will invalidate the set, making the NFTs unusable.",onClick:function(t){return a(e.map((function(e){return e.token_id})))},children:"Payout"})}),Object(m.jsx)("div",{className:"col s11",children:Object(m.jsx)(j.Carousel,{children:e.map((function(e){return Object(m.jsx)("img",{src:e.metadata.media,alt:e.metadata.title,height:"200",className:"nft-image"})}))})})]})})})):Object(m.jsxs)("p",{children:["You do not have any complete sets yet. Head over to ",Object(m.jsx)(u.b,{className:"menu-item",to:"/collection",children:"your collection"})," and mint some more animals. Good luck! \ud83c\udf40"]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Available sets."})}),Object(m.jsx)("h1",{children:"Loading..."}),Object(m.jsx)(j.Spinner,{})]})},z=(n(234),n(235),n(236).version);n(237);var V=O()(3).times(Math.pow(10,14)).toFixed(),Z=function(e){var t=e.contract,n=e.nftContract,a=e.currentUser,r=e.nearConfig,i=e.wallet,l=e.provider,d=e.lastTransaction,u=e.error,j=Object(o.useState)(""),b=Object(h.a)(j,2),x=b[0],g=b[1];Object(o.useEffect)((function(){function e(){return e=Object(c.a)(s.a.mark((function e(t,n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.txStatus(t,n);case 2:a=e.sent,(c=a.receipts_outcome[0].outcome.logs.pop())||(c=a.receipts_outcome[6].outcome.logs.pop()),g(c);case 6:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}u?(g(decodeURI(u)),window.history.pushState({},"",window.location.origin+window.location.hash)):d&&a&&(!function(t,n){e.apply(this,arguments)}(d,a.accountId),window.history.pushState({},"",window.location.origin+window.location.hash))}),[d,u,a,l]);var v=function(){i.requestSignIn({contractId:r.contractName,methodNames:[t.buy_animal.name,t.payout.name]},"NEAR Challenge #6 - Kawaii Zoo NFTs",null,null)};return Object(m.jsx)(f.d,{children:Object(m.jsxs)(f.b,{path:"/",element:Object(m.jsx)(_,{currentUser:a,signIn:v,signOut:function(){i.signOut(),window.location.replace(window.location.origin+window.location.pathname)},clearMessage:function(){g("")},message:x}),children:[Object(m.jsx)(f.b,{index:!0,element:a?Object(m.jsx)(K,{version:z,nearConfig:r}):Object(m.jsx)(p,{signIn:v})}),Object(m.jsx)(f.b,{path:"collection",element:a?Object(m.jsx)(W,{onNftMint:function(e){e.preventDefault();var n=e.target.elements.fieldset,a=e.target.elements.item(1);n.disabled=!0,t.buy_animal({count:parseInt(a.value)},V,O()("1").times(Math.pow(10,24)).times(a.value).toFixed()).then((function(e){console.log("Successfully minted.")}))},currentUser:a,contract:n}):Object(m.jsx)(p,{signIn:v})}),Object(m.jsx)(f.b,{path:"payout",element:a?Object(m.jsx)(B,{onPayout:function(e){t.payout({nft_set:e.map((function(e){return parseInt(e)}))},V,0).then((function(e){console.log("Successfully payed out.")}))},currentUser:a,contract:n}):Object(m.jsx)(p,{signIn:v})}),Object(m.jsx)(f.b,{path:"*",element:Object(m.jsx)(I,{})})]})})},J=n(102),Y=n.n(J);function G(){return(G=Object(c.a)(s.a.mark((function e(){var t,n,c,r,o,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y()(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-6-ukraine-nft",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NEAR_ENV||"testnet"),n=new U.keyStores.BrowserLocalStorageKeyStore,e.next=4,U.connect(Object(a.a)({keyStore:n},t));case 4:if(c=e.sent,!(r=new U.WalletConnection(c)).getAccountId()){e.next=12;break}return e.t0=r.getAccountId(),e.next=10,r.account().state();case 10:e.t1=e.sent.amount,o={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new U.Contract(r.account(),t.contractName,{viewMethods:[],changeMethods:["buy_animal","payout"],sender:r.getAccountId()});case 14:return i=e.sent,e.next=17,new U.Contract(r.account(),t.nftContractName,{viewMethods:["nft_supply_for_owner","nft_tokens_for_owner"],changeMethods:[],sender:r.getAccountId()});case 17:return l=e.sent,d=c.connection.provider,e.abrupt("return",{contract:i,nftContract:l,currentUser:o,nearConfig:t,walletConnection:r,provider:d});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return G.apply(this,arguments)}().then((function(e){var t,n,a=e.contract,c=e.nftContract,r=e.currentUser,s=e.nearConfig,o=e.walletConnection,i=e.provider,l=new URLSearchParams(window.location.search);l.has("transactionHashes")&&(t=l.get("transactionHashes")),l.has("errorMessage")&&(n=l.get("errorMessage")),d.a.render(Object(m.jsx)(u.a,{children:Object(m.jsx)(Z,{contract:a,currentUser:r,nearConfig:s,wallet:o,lastTransaction:t,provider:i,error:n,nftContract:c})}),document.getElementById("root"))}))}},[[239,1,2]]]);
//# sourceMappingURL=main.a3f8eecb.chunk.js.map